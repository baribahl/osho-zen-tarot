---
interface Props {
  title: string;
  description?: string;
}

const { title, description = "Explorez le Tarot Zen d'Osho avec Barib - Tirage de cartes, galerie complète et significations profondes." } = Astro.props;
---

<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <link rel="stylesheet" href="/src/styles/variables.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=Philosopher:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="preload" href="/src/data/osho_cards.json" as="fetch" crossorigin="anonymous" />
    <title>{title}</title>
  </head>
  <body>
    <a href="#main-content" class="skip-to-main">Aller au contenu principal</a>
    <header class="site-header">
      <nav class="nav-container">
        <a href="/" class="site-logo">
          <span class="logo-text">Barib's Osho Zen Tarot</span>
        </a>
        <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
          <span class="material-symbols-outlined">menu</span>
        </button>
        <ul class="nav-menu" id="navMenu">
          <li><a href="/">Tirer une carte</a></li>
          <li><a href="/cartes">Parcourir les cartes</a></li>
          <li><a href="/a-propos">À propos</a></li>
        </ul>
      </nav>
    </header>

    <main id="main-content">
      <slot />
    </main>

    <footer class="site-footer">
      <p>© 2025 Barib's Osho Zen Tarot - Une exploration spirituelle et contemplative</p>
    </footer>
  </body>
</html>

<style>
  :global(*) {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  :global(body) {
    font-family: 'Crimson Pro', Georgia, serif;
    line-height: 1.6;
    color: #e0e0e0;
    background: linear-gradient(135deg, #1a1a3e 0%, #0f3443 100%);
    min-height: 100vh;
  }

  .site-header {
    position: sticky;
    top: 0;
    background: rgba(15, 15, 30, 0.9);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    z-index: 100;
  }

  .nav-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .site-logo {
    text-decoration: none;
    color: #e0e0e0;
  }

  .logo-text {
    font-family: 'Cinzel Decorative', serif;
    font-size: 1.25rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    background: linear-gradient(135deg, #ff6b6b, #ee5a6f, #c06c84);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .nav-menu {
    display: flex;
    gap: 2rem;
    list-style: none;
  }

  .nav-menu a {
    font-family: 'Philosopher', sans-serif;
    font-weight: 400;
    color: #e0e0e0;
    text-decoration: none;
    font-size: 0.95rem;
    transition: color 0.3s ease;
    position: relative;
  }

  .nav-menu a:hover {
    color: #ff6b6b;
  }

  .nav-menu a::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, #ff6b6b, #ee5a6f);
    transition: width 0.3s ease;
  }

  .nav-menu a:hover::after {
    width: 100%;
  }

  main {
    min-height: calc(100vh - 200px);
  }

  .site-footer {
    text-align: center;
    padding: 2rem;
    margin-top: 4rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    color: #888;
    font-size: 0.9rem;
  }

  .mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    color: var(--color-text-primary);
    cursor: pointer;
    padding: 0.5rem;
    transition: color var(--transition-normal);
  }

  .mobile-menu-toggle:hover {
    color: var(--color-accent-orange);
  }

  .mobile-menu-toggle .material-symbols-outlined {
    font-size: 1.75rem;
  }

  @media (max-width: 768px) {
    .nav-container {
      padding: 1rem;
      position: relative;
    }

    .mobile-menu-toggle {
      display: block;
    }

    .nav-menu {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: rgba(15, 15, 30, 0.98);
      backdrop-filter: blur(20px);
      flex-direction: column;
      gap: 0;
      padding: 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .nav-menu.active {
      max-height: 300px;
    }

    .nav-menu li {
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .nav-menu li:last-child {
      border-bottom: none;
    }

    .nav-menu a {
      display: block;
      padding: 1rem 1.5rem;
      font-size: 1rem;
    }

    .nav-menu a::after {
      display: none;
    }

    .logo-text {
      font-size: 1rem;
    }
  }

  @media (max-width: 375px) {
    .nav-container {
      padding: 0.75rem;
    }

    .logo-text {
      font-size: 0.9rem;
    }
  }
</style>

<script>
  // Mobile menu toggle
  const mobileMenuToggle = document.getElementById('mobileMenuToggle');
  const navMenu = document.getElementById('navMenu');

  if (mobileMenuToggle && navMenu) {
    mobileMenuToggle.addEventListener('click', () => {
      navMenu.classList.toggle('active');
      const icon = mobileMenuToggle.querySelector('.material-symbols-outlined');
      if (icon) {
        icon.textContent = navMenu.classList.contains('active') ? 'close' : 'menu';
      }
    });

    // Close menu when clicking a link
    navMenu.querySelectorAll('a').forEach((link) => {
      link.addEventListener('click', () => {
        navMenu.classList.remove('active');
        const icon = mobileMenuToggle.querySelector('.material-symbols-outlined');
        if (icon) {
          icon.textContent = 'menu';
        }
      });
    });
  }
</script>
